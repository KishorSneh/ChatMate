<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChatMate Login</title>
<style>
:root {
    --bg-color: #f3f8ff;           
    --nav-bg: #ffffff;
    --nav-text: #2a60c9;
    --panel-left-bg: #ffffff;      
    --panel-left-text: #333;
    --panel-right-bg: #fff;        
    --panel-right-text: #333;
    --input-bg: #fff;
    --input-text: #333;
    --button-bg: linear-gradient(135deg,#4a90e2,#50e3c2);
    --link-color: #2a60e2;
}

body.dark-mode {
    --bg-color: #0a1a3f;
    --nav-bg: #0d1f52;
    --nav-text: #fff;
    --panel-left-bg: #0d1f52;
    --panel-left-text: #fff;
    --panel-right-bg: #14213d;
    --panel-right-text: #e0e0e0;
    --input-bg: #1f2c4d;
    --input-text: #e0e0e0;
    --button-bg: linear-gradient(135deg,#4a90e2,#50e3c2);
    --link-color: #4a90e2;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
    min-height:100vh;
    background:var(--bg-color);
    display:flex;
    flex-direction:column;
    transition:0.4s ease;
}

/* ===== Navbar ===== */
nav{
    background: var(--nav-bg);
    padding: 15px 50px;
    display:flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
nav .logo{
    font-size: 22px;
    font-weight: 700;
    color: var(--nav-text);
}
nav ul{
    list-style: none;
    display: flex;
    gap: 20px;
    margin: 0;
    padding: 0;
    align-items: center;
}

nav ul li a{
    text-decoration: none;
    color: var(--nav-text);
    font-weight: 500;
    transition: 0.3s;
}
nav ul li a:hover{
    color: #1e3f91;
}
.toggle-btn{
    background: #2a60c9;
    color: #fff;
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: 0.3s;
}
.toggle-btn:hover{
    background: #1e3f91;
}

/* ===== Wrapper ===== */
.wrapper{
    width:900px;
    max-width:95%;
    display:flex;
    margin:50px auto;
    border-radius:20px;
    overflow:hidden;
    box-shadow:0 15px 40px rgba(0,0,0,0.2);
}

.panel{
    flex:1;
    padding:50px;
    display:flex;
    flex-direction:column;
    justify-content:center;
}

/* ===== Left Panel ===== */
.panel.left{
    background:var(--panel-left-bg);
    color:var(--panel-left-text);
    text-align:center;
}
.panel.left h1{
    font-size:38px;
    color:#2a60c9;
    margin-bottom:20px;
}
.panel.left p{
    font-size:16px;
    line-height:1.5;
    margin-bottom:30px;
}
.images-container{
    display:flex;
    justify-content:center;
}
.images-container img{
    width:180px;
    max-width:80%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.images-container img:hover{
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

/* ===== Right Panel ===== */
.panel.right{
    background:var(--panel-right-bg); 
    color:var(--panel-right-text);
}
.panel.right h2{font-size:28px; margin-bottom:20px;}
.panel.right p, .panel.right a{color:var(--panel-right-text); font-size:14px;}
.panel.right a{display:block; margin-top:10px; text-decoration:none; color:var(--link-color);}
.panel.right a:hover{text-decoration:underline;}

form{display:flex; flex-direction:column;}
input[type="text"], input[type="email"], input[type="password"]{
    width:100%; padding:14px 18px; margin:10px 0; border-radius:12px; border:1px solid #ccc; background:var(--input-bg); color:var(--input-text); font-size:16px; outline:none; transition:0.3s;
}
input:focus{border-color:#4a90e2; box-shadow:0 0 8px rgba(74,144,226,0.3);}
button{
    padding:14px; margin-top:20px; border:none; border-radius:12px; background:var(--button-bg); color:#fff; font-size:17px; font-weight:500; cursor:pointer; transition:0.4s;
}
button:hover{transform:translateY(-2px); box-shadow:0 10px 25px rgba(0,0,0,0.2);}
.msg{margin-top:12px;color:#e74c3c;font-weight:500;font-size:14px;}

@media(max-width:768px){
    .wrapper{flex-direction:column; margin:20px auto;}
    .images-container img{width:60%; margin:10px 0;}
}
</style>
</head>
<body>
<!-- Navbar -->
<nav>
    <div class="logo">ChatMate</div>
    <ul>
        <li><a href="{{ url_for('signup') }}">Signup</a></li>
        <li><button class="toggle-btn" id="toggleBtn">üåô Dark Mode</button></li>
    </ul>
</nav>

<div class="wrapper">
    <div class="panel left">
        <h2>Welcome Back!</h2>
        <p>Login to ChatMate and boost your study efficiency.</p>
        <div class="images-container">
            <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" alt="Open Book Illustration">
        </div>
    </div>
    <div class="panel right">
        <h2>Login</h2>
        <form id="loginForm">
            <input type="text" name="username_email" placeholder="Username or Email" required>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit">Login</button>
            <p>Don't have an account? <a href="{{ url_for('signup') }}">Sign Up</a></p>
            <p id="loginMsg" class="msg"></p>
        </form>
    </div>
</div>

<script>
// AJAX Login
document.getElementById('loginForm').addEventListener('submit', async function(e){
    e.preventDefault();
    let formData = new FormData(this);
    let response = await fetch('{{ url_for("login") }}',{method:'POST',body:formData});
    let data = await response.json();
    document.getElementById('loginMsg').innerText = data.message;
    if(data.success){ window.location.href="{{ url_for('chatmate') }}"; }
});

// Dark/Light Toggle
const toggleBtn = document.getElementById('toggleBtn');
toggleBtn.addEventListener('click', ()=>{
    document.body.classList.toggle('dark-mode');
    toggleBtn.textContent = document.body.classList.contains('dark-mode')?"‚òÄÔ∏è Light Mode":"üåô Dark Mode";
    localStorage.setItem('mode', document.body.classList.contains('dark-mode')?'dark':'light');
});

// Load mode from localStorage
if(localStorage.getItem('mode')==='dark'){
    document.body.classList.add('dark-mode');
    toggleBtn.textContent = "‚òÄÔ∏è Light Mode";
}
</script>

</body>
</html>
